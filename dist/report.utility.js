!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ReportUtility=n():e.ReportUtility=n()}(window,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist",t(t.s=0)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1);Object.defineProperty(n,"init",{enumerable:!0,get:function(){return r.init}}),Object.defineProperty(n,"destroy",{enumerable:!0,get:function(){return r.destroy}}),Object.defineProperty(n,"config",{enumerable:!0,get:function(){return r.config}}),Object.defineProperty(n,"send",{enumerable:!0,get:function(){return r.send}})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.destroy=n.send=n.config=n.init=void 0;var r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=s(t(2)),a=s(t(4));function s(e){return e&&e.__esModule?e:{default:e}}t(5);var c=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=[{el:'[data-name="send"]',evt:"click",cb:"onSend"},{el:'[data-name="author"]',evt:"change",cb:"onChangeAuthor"},{el:'[data-name="message"]',evt:"change",cb:"onChangeMessage"},{el:'[data-name="header"]',evt:"click",cb:"onToggle"}],this.onSend=this.onSend.bind(this),this.onSendError=this.onSendError.bind(this),this.onSendSuccess=this.onSendSuccess.bind(this),this.onChangeAuthor=this.onChangeAuthor.bind(this),this.onChangeMessage=this.onChangeMessage.bind(this),this.onToggle=this.onToggle.bind(this)}return i(e,[{key:"init",value:function(){if(this.el=document.querySelector(this.state.el),!this.el)throw TypeError("`el` must be specified through `config` method");return this.render(),this.bindEvents(),this}},{key:"destroy",value:function(){this.unbindEvents(),this.el.innerHTML=""}},{key:"config",value:function(e){this.state=r({},o.default,e)}},{key:"bindEvents",value:function(){var e=this;this.events.forEach(function(n){var t=n.el,r=n.evt,i=n.cb,o=e.el.querySelectorAll(t);o.length&&Array.prototype.map.call(o,function(n){n.addEventListener(r,e[i],!1)})})}},{key:"unbindEvents",value:function(){var e=this;this.events.forEach(function(n){var t=n.el,r=n.evt,i=n.cb,o=e.el.querySelectorAll(t);o.length&&Array.prototype.map.call(o,function(n){n.removeEventListener(r,e[i],!1)})})}},{key:"setState",value:function(e){var n=this.state;this.state=r({},this.state,e),this.update(n)}},{key:"onToggle",value:function(){this.setState({minimized:!this.state.minimized})}},{key:"onChangeAuthor",value:function(e){this.setState({name:e.currentTarget.value})}},{key:"onChangeMessage",value:function(e){this.setState({message:e.currentTarget.value})}},{key:"onSend",value:function(e){var n=this;e.preventDefault();var t=this.state,r=t.name,i=t.message,o=t.url;o&&(this.setState({isSending:!0}),(0,a.default)(o,{name:r,message:i}).then(function(e){if(200!==e.status)throw new Error(e.statusText);n.onSendSuccess()}).catch(this.onSendError))}},{key:"onSendSuccess",value:function(){this.setState({name:"",message:"",isSending:!1})}},{key:"onSendError",value:function(){this.setState({isError:!0,isSending:!1})}},{key:"update",value:function(e){this.state.minimized?this.el.querySelector(".rp-container").classList.add("rp-container_minimized"):this.el.querySelector(".rp-container").classList.remove("rp-container_minimized"),this.el.querySelector(".rp-container__cover_loading").style.display=this.state.isSending?"block":"none",this.el.querySelector(".rp-container__cover_error").style.display=this.state.isError?"block":"none",e.name!==this.state.name&&(this.el.querySelector(".rp-container__author .rp-container__field").value=this.state.name),e.message!==this.state.message&&(this.el.querySelector(".rp-container__message .rp-container__field").value=this.state.message)}},{key:"render",value:function(){this.el.innerHTML="",this.el.insertAdjacentHTML("afterbegin",this.state.template);var e=this.el.querySelector(".rp-container");e&&this.state.minimized&&e.classList.add("minimized")}}]),e}()),u=c.init.bind(c),l=c.config.bind(c),d=c.destroy.bind(c);n.init=u,n.config=l,n.send=a.default,n.destroy=d},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={url:"/report",minimized:!0,template:function(e){return e&&e.__esModule?e:{default:e}}(t(3)).default};n.default=r},function(e,n){e.exports='<div class=rp-container> <div class=rp-container__header data-name=header> Напишите нам об ошибке! <div class=rp-container__dismiss></div> </div> <div class=rp-container__wrapper> <form> <fieldset> <div class=rp-container__author> <label> Ваше Имя <input data-name=author class=rp-container__field type=text /> </label> </div> <div class=rp-container__message> <label> Оставьте сообщение <textarea data-name=message class=rp-container__field type=text></textarea> </label> </div> </fieldset> <div class=rp-container__actions> <button class=rp-container__button data-name=send>Отправить</button> </div> <div class="rp-container__cover rp-container__cover_loading">Отправляем, ждите...</div> <div class="rp-container__cover rp-container__cover_error"> <div class=rp-container__field>Упс, что-то пошло не так...</div> <input type=submit class=rp-container__button data-name=send value="Отправить еще раз"> </div> </form> </div> </div>'},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.message,r=n.name;return fetch(e,{method:"POST",body:JSON.stringify({name:r,message:t})})}},function(e,n,t){var r=t(6);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};t(8)(r,i);r.locals&&(e.exports=r.locals)},function(e,n,t){(e.exports=t(7)(!1)).push([e.i,".rp-container * {\r\n    box-sizing: border-box;\r\n}\r\n\r\n.rp-container fieldset {\r\n    border: none;\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n.rp-container {\r\n    bottom: 0;\r\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);\r\n    cursor: pointer;\r\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\r\n    margin: 0;\r\n    width: 280px;\r\n    padding: 0;\r\n    position: absolute;\r\n    right: 20px;\r\n}\r\n\r\n.rp-container_minimized .rp-container__wrapper {\r\n    max-height: 0;\r\n    opacity: 1;\r\n}\r\n.rp-container_minimized .rp-container__dismiss {\r\n    display: none;\r\n}\r\n\r\n.rp-container__wrapper {\r\n    max-height: 500px;\r\n    opacity: 1;\r\n    overflow: hidden;\r\n    position: relative;\r\n    transition: all .2s ease-in-out;\r\n}\r\n\r\n.rp-container__cover {\r\n    background-color: rgb(245, 249, 251);\r\n    color: rgb(136, 145, 137);\r\n    display: none;\r\n    height: 100%;\r\n    left: 0;\r\n    padding: 20px;\r\n    position: absolute;\r\n    text-align: center;\r\n    top: 0;\r\n    width: 100%;\r\n}\r\n\r\n.rp-container__header {\r\n    background-color: rgb(0, 146, 235);\r\n    color: #fff;\r\n    padding: 15px 20px;\r\n}\r\n\r\n.rp-container__dismiss {\r\n    color: #fff;\r\n    cursor: pointer;\r\n    font-family: Arial, sans-serif;\r\n    font-size: 14px;\r\n    font-weight: lighter;\r\n    position: absolute;\r\n    right: 8px;\r\n    text-decoration: none;\r\n    top: 8px;\r\n}\r\n\r\n.rp-container__dismiss:after {\r\n    /* UTF-8 symbol */\r\n    content: '\\2716';\r\n}\r\n\r\n.rp-container__cover .rp-container__field {\r\n    padding: 20px 0;\r\n}\r\n\r\n.rp-container__field {\r\n    border: none;\r\n    border-bottom: 1px solid transparent;\r\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\r\n    margin: 0;\r\n    padding: 0px;\r\n    padding-top: 10px;\r\n    width: 100%;\r\n}\r\n\r\n.rp-container__button:focus,\r\n.rp-container__field:focus {\r\n    outline: 0;\r\n}\r\n\r\n.rp-container__button {\r\n    background-color: rgba(0, 146, 235, 1);\r\n    border: none;\r\n    color: #fff;\r\n    cursor: pointer;\r\n    letter-spacing: 1px;\r\n    padding: 12px 35px 10px;\r\n    text-transform: uppercase;\r\n    width: 100%;\r\n}\r\n\r\n.rp-container__message {\r\n    background-color: rgba(245, 249, 251, 1);\r\n}\r\n\r\n.rp-container__message .rp-container__field {\r\n    background-color: transparent;\r\n    min-height: 80px;\r\n    resize: none;\r\n}\r\n\r\n.rp-container label ,\r\n.rp-container label {\r\n    color: rgb(136, 145, 137);\r\n    display: block;\r\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\r\n    font-size: 12px;\r\n    padding: 20px;\r\n}\r\n\r\n.rp-container__actions {\r\n    padding: 20px;\r\n}",""])},function(e,n){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t=function(e,n){var t=e[1]||"",r=e[3];if(!r)return t;if(n&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[t].concat(o).concat([i]).join("\n")}return[t].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,n,t){var r={},i=function(e){var n;return function(){return void 0===n&&(n=e.apply(this,arguments)),n}}(function(){return window&&document&&document.all&&!window.atob}),o=function(e){var n={};return function(e,t){if("function"==typeof e)return e();if(void 0===n[e]){var r=function(e,n){return n?n.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}n[e]=r}return n[e]}}(),a=null,s=0,c=[],u=t(9);function l(e,n){for(var t=0;t<e.length;t++){var i=e[t],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(b(i.parts[a],n))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(b(i.parts[a],n));r[i.id]={id:i.id,refs:1,parts:s}}}}function d(e,n){for(var t=[],r={},i=0;i<e.length;i++){var o=e[i],a=n.base?o[0]+n.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):t.push(r[a]={id:a,parts:[s]})}return t}function f(e,n){var t=o(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):t.insertBefore(n,t.firstChild),c.push(n);else if("bottom"===e.insertAt)t.appendChild(n);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertAt.before,t);t.insertBefore(n,i)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var n=c.indexOf(e);n>=0&&c.splice(n,1)}function h(e){var n=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return t.nc}();r&&(e.attrs.nonce=r)}return v(n,e.attrs),f(e,n),n}function v(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function b(e,n){var t,r,i,o;if(n.transform&&e.css){if(!(o=n.transform(e.css)))return function(){};e.css=o}if(n.singleton){var c=s++;t=a||(a=h(n)),r=g.bind(null,t,c,!1),i=g.bind(null,t,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(e){var n=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(n,e.attrs),f(e,n),n}(n),r=function(e,n,t){var r=t.css,i=t.sourceMap,o=void 0===n.convertToAbsoluteUrls&&i;(n.convertToAbsoluteUrls||o)&&(r=u(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,t,n),i=function(){p(t),t.href&&URL.revokeObjectURL(t.href)}):(t=h(n),r=function(e,n){var t=n.css,r=n.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}.bind(null,t),i=function(){p(t)});return r(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;r(e=n)}else i()}}e.exports=function(e,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(n=n||{}).attrs="object"==typeof n.attrs?n.attrs:{},n.singleton||"boolean"==typeof n.singleton||(n.singleton=i()),n.insertInto||(n.insertInto="head"),n.insertAt||(n.insertAt="bottom");var t=d(e,n);return l(t,n),function(e){for(var i=[],o=0;o<t.length;o++){var a=t[o];(s=r[a.id]).refs--,i.push(s)}e&&l(d(e,n),n);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}};var m=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}();function g(e,n,t,r){var i=t?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(n,i);else{var o=document.createTextNode(i),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(o,a[n]):e.appendChild(o)}}},function(e,n){e.exports=function(e){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=n.protocol+"//"+n.host,r=t+n.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,n){var i,o=n.trim().replace(/^"(.*)"$/,function(e,n){return n}).replace(/^'(.*)'$/,function(e,n){return n});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?t+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SZXBvcnRVdGlsaXR5L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9SZXBvcnRVdGlsaXR5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL1JlcG9ydFV0aWxpdHkvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vUmVwb3J0VXRpbGl0eS8uL3NyYy9yZXBvcnR1dGlsaXR5LmpzIiwid2VicGFjazovL1JlcG9ydFV0aWxpdHkvLi9zcmMvZGVmYXVsdHMuanMiLCJ3ZWJwYWNrOi8vUmVwb3J0VXRpbGl0eS8uL3NyYy90ZW1wbGF0ZXMvZm9ybS5odG1sIiwid2VicGFjazovL1JlcG9ydFV0aWxpdHkvLi9zcmMvdXRpbHMvc2VuZC5qcyIsIndlYnBhY2s6Ly9SZXBvcnRVdGlsaXR5Ly4vc3JjL2Nzcy9zdHlsZXMuY3NzP2QwMDIiLCJ3ZWJwYWNrOi8vUmVwb3J0VXRpbGl0eS8uL3NyYy9jc3Mvc3R5bGVzLmNzcyIsIndlYnBhY2s6Ly9SZXBvcnRVdGlsaXR5Ly4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIiwid2VicGFjazovL1JlcG9ydFV0aWxpdHkvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vUmVwb3J0VXRpbGl0eS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImluaXQiLCJkZXN0cm95IiwiY29uZmlnIiwic2VuZCIsInJlcG9ydFV0aWxpdHkiLCJSZXBvcnRVdGlsaXR5IiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImV2ZW50cyIsImVsIiwiZXZ0IiwiY2IiLCJvblNlbmQiLCJvblNlbmRFcnJvciIsIm9uU2VuZFN1Y2Nlc3MiLCJvbkNoYW5nZUF1dGhvciIsIm9uQ2hhbmdlTWVzc2FnZSIsIm9uVG9nZ2xlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3RhdGUiLCJUeXBlRXJyb3IiLCJyZW5kZXIiLCJiaW5kRXZlbnRzIiwidW5iaW5kRXZlbnRzIiwiaW5uZXJIVE1MIiwib3B0aW9ucyIsIl9leHRlbmRzIiwiZGVmYXVsdHMiLCJfdGhpcyIsImZvckVhY2giLCJfcmVmIiwiZG9tRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiQXJyYXkiLCJtYXAiLCJkb21FbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl90aGlzMiIsIl9yZWYyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm5ld1N0YXRlIiwicHJldlN0YXRlIiwidXBkYXRlIiwic2V0U3RhdGUiLCJtaW5pbWl6ZWQiLCJlIiwiY3VycmVudFRhcmdldCIsIm1lc3NhZ2UiLCJfdGhpczMiLCJwcmV2ZW50RGVmYXVsdCIsIl9zdGF0ZSIsInVybCIsImlzU2VuZGluZyIsIl9zZW5kMiIsImRlZmF1bHQiLCJ0aGVuIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJFcnJvciIsInN0YXR1c1RleHQiLCJjYXRjaCIsImlzRXJyb3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJzdHlsZSIsImRpc3BsYXkiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJ0ZW1wbGF0ZSIsImh0bWwiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udGVudCIsImhtciIsInRyYW5zZm9ybSIsImluc2VydEludG8iLCJsb2NhbHMiLCJwdXNoIiwidXNlU291cmNlTWFwIiwibGlzdCIsInRvU3RyaW5nIiwiaXRlbSIsImNzc01hcHBpbmciLCJidG9hIiwic291cmNlTWFwcGluZyIsInNvdXJjZU1hcCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidG9Db21tZW50Iiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY29uY2F0Iiwiam9pbiIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJtZWRpYVF1ZXJ5IiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImlkIiwic3R5bGVzSW5Eb20iLCJpc09sZElFIiwiZm4iLCJtZW1vIiwiYXBwbHkiLCJtZW1vaXplIiwiYWxsIiwiYXRvYiIsImdldEVsZW1lbnQiLCJ0YXJnZXQiLCJwYXJlbnQiLCJzdHlsZVRhcmdldCIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJzdHlsZXNJbnNlcnRlZEF0VG9wIiwiZml4VXJscyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwiZG9tU3R5bGUiLCJyZWZzIiwiaiIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJuZXdTdHlsZXMiLCJiYXNlIiwicGFydCIsImNzcyIsIm1lZGlhIiwiaW5zZXJ0U3R5bGVFbGVtZW50IiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRycyIsInR5cGUiLCJub25jZSIsIm5jIiwiZ2V0Tm9uY2UiLCJhZGRBdHRycyIsImtleXMiLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJyZXN1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJhdXRvRml4VXJscyIsImNvbnZlcnRUb0Fic29sdXRlVXJscyIsImJsb2IiLCJvbGRTcmMiLCJocmVmIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsIm5ld09iaiIsIkRFQlVHIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInJlcGxhY2VUZXh0IiwidGV4dFN0b3JlIiwiaW5kZXgiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsIkJvb2xlYW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsImxvY2F0aW9uIiwiYmFzZVVybCIsInByb3RvY29sIiwiaG9zdCIsImN1cnJlbnREaXIiLCJwYXRobmFtZSIsInJlcGxhY2UiLCJmdWxsTWF0Y2giLCJvcmlnVXJsIiwibmV3VXJsIiwidW5xdW90ZWRPcmlnVXJsIiwidHJpbSIsIiQxIiwidGVzdCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsVUFBQUgsR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxjQUFBRCxJQUVBRCxFQUFBLGNBQUFDLElBUkEsQ0FTQ0ssT0FBQSxXQUNELG1CQ1RBLElBQUFDLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFQ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QUssRUFBQTlKLE9BQ0FpQyxFQUFBMkUsYUFBQWlELEVBQUFDLEVBQUFMLElBRUF4SCxFQUFBNEUsWUFBQWdELG9CQzNVQXRPLEVBQUFELFFBQUEsU0FBQWdMLEdBRUEsSUFBQXlELEVBQUEsb0JBQUFyTyxlQUFBcU8sU0FFQSxJQUFBQSxFQUNBLFVBQUFySSxNQUFBLG9DQUlBLElBQUE0RSxHQUFBLGlCQUFBQSxFQUNBLE9BQUFBLEVBR0EsSUFBQTBELEVBQUFELEVBQUFFLFNBQUEsS0FBQUYsRUFBQUcsS0FDQUMsRUFBQUgsRUFBQUQsRUFBQUssU0FBQUMsUUFBQSxpQkEyREEsT0EvQkEvRCxFQUFBK0QsUUFBQSwrREFBQUMsRUFBQUMsR0FFQSxJQVdBQyxFQVhBQyxFQUFBRixFQUNBRyxPQUNBTCxRQUFBLG9CQUFBOU4sRUFBQW9PLEdBQXdDLE9BQUFBLElBQ3hDTixRQUFBLG9CQUFBOU4sRUFBQW9PLEdBQXdDLE9BQUFBLElBR3hDLDBEQUFBQyxLQUFBSCxHQUNBSCxHQVFBRSxFQUZBLElBQUFDLEVBQUFyRCxRQUFBLE1BRUFxRCxFQUNHLElBQUFBLEVBQUFyRCxRQUFBLEtBRUg0QyxFQUFBUyxFQUdBTixFQUFBTSxFQUFBSixRQUFBLFlBSUEsT0FBQTFILEtBQUFDLFVBQUE0SCxHQUFBIiwiZmlsZSI6InJlcG9ydC51dGlsaXR5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiUmVwb3J0VXRpbGl0eVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJSZXBvcnRVdGlsaXR5XCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0XCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCB7XG4gICAgaW5pdCwgZGVzdHJveSwgY29uZmlnLCBzZW5kLFxufSBmcm9tICcuL3JlcG9ydHV0aWxpdHknXG4iLCJpbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi9kZWZhdWx0cydcbmltcG9ydCBzZW5kIGZyb20gJy4vdXRpbHMvc2VuZCdcblxuaW1wb3J0ICcuL2Nzcy9zdHlsZXMuY3NzJ1xuXG4vKiogQ2xhc3MgcmVwcmVzZW50aW5nIHJlcG9ydCBmb3JtICovXG5jbGFzcyBSZXBvcnRVdGlsaXR5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vblNlbmQgPSB0aGlzLm9uU2VuZC5iaW5kKHRoaXMpXG4gICAgICAgIHRoaXMub25TZW5kRXJyb3IgPSB0aGlzLm9uU2VuZEVycm9yLmJpbmQodGhpcylcbiAgICAgICAgdGhpcy5vblNlbmRTdWNjZXNzID0gdGhpcy5vblNlbmRTdWNjZXNzLmJpbmQodGhpcylcbiAgICAgICAgdGhpcy5vbkNoYW5nZUF1dGhvciA9IHRoaXMub25DaGFuZ2VBdXRob3IuYmluZCh0aGlzKVxuICAgICAgICB0aGlzLm9uQ2hhbmdlTWVzc2FnZSA9IHRoaXMub25DaGFuZ2VNZXNzYWdlLmJpbmQodGhpcylcbiAgICAgICAgdGhpcy5vblRvZ2dsZSA9IHRoaXMub25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlciBhbmQgYmluZCBldmVudHMgdG8gcmVwb3J0IGZvcm0gKGBlbGAgbXVzdCBiZSBzcGVjaWZpZWQgdGhyb3VnaCBgY29uZmlnYCBtZXRob2QpXG4gICAgICogQHJldHVybiB7UmVwb3J0VXRpbGl0eX0gQSBSZXBvcnRVdGlsaXR5IGluc3RhbmNlKGRvbid0IHVzZSBpdCBkaXJlY3RseSwgb25seSBmb3IgdGVzdHMpXG4gICAgICovXG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zdGF0ZS5lbClcbiAgICAgICAgaWYgKCF0aGlzLmVsKSB0aHJvdyBUeXBlRXJyb3IoJ2BlbGAgbXVzdCBiZSBzcGVjaWZpZWQgdGhyb3VnaCBgY29uZmlnYCBtZXRob2QnKVxuXG4gICAgICAgIHRoaXMucmVuZGVyKClcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKClcblxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIGRlc3Ryb3kgZm9ybVxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMudW5iaW5kRXZlbnRzKClcbiAgICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSAnJ1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBuZXcgc3RhdGUgbWVyZ2VzIHdpdGggZGVmYXVsdHNcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IG9wdGlvbnMuIHNlZSBkZWZhdWx0cyBzZWN0aW9uXG4gICAgICovXG4gICAgY29uZmlnKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLCBvcHRpb25zKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2ZW50cyBhcnJheSwgeyBlbCwgZXZ0LCBjYiB9IChzZWxlY3RvciwgZXZlbnROYW1lLCBjYWxsYmFja05hbWUpXG4gICAgICovXG4gICAgZXZlbnRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBlbDogJ1tkYXRhLW5hbWU9XCJzZW5kXCJdJyxcbiAgICAgICAgICAgIGV2dDogJ2NsaWNrJyxcbiAgICAgICAgICAgIGNiOiAnb25TZW5kJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgZWw6ICdbZGF0YS1uYW1lPVwiYXV0aG9yXCJdJyxcbiAgICAgICAgICAgIGV2dDogJ2NoYW5nZScsXG4gICAgICAgICAgICBjYjogJ29uQ2hhbmdlQXV0aG9yJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgZWw6ICdbZGF0YS1uYW1lPVwibWVzc2FnZVwiXScsXG4gICAgICAgICAgICBldnQ6ICdjaGFuZ2UnLFxuICAgICAgICAgICAgY2I6ICdvbkNoYW5nZU1lc3NhZ2UnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBlbDogJ1tkYXRhLW5hbWU9XCJoZWFkZXJcIl0nLFxuICAgICAgICAgICAgZXZ0OiAnY2xpY2snLFxuICAgICAgICAgICAgY2I6ICdvblRvZ2dsZScsXG4gICAgICAgIH0sXG4gICAgXVxuXG4gICAgYmluZEV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5ldmVudHMuZm9yRWFjaCgoeyBlbCwgZXZ0LCBjYiB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkb21FbGVtZW50cyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbChlbClcbiAgICAgICAgICAgIGlmIChkb21FbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZG9tRWxlbWVudHMsIChkb21FbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldnQsIHRoaXNbY2JdLCBmYWxzZSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHVuYmluZEV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5ldmVudHMuZm9yRWFjaCgoeyBlbCwgZXZ0LCBjYiB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkb21FbGVtZW50cyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbChlbClcbiAgICAgICAgICAgIGlmIChkb21FbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZG9tRWxlbWVudHMsIChkb21FbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldnQsIHRoaXNbY2JdLCBmYWxzZSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1lcmdlcyBzdGF0ZSB3aXRoIG5ld1N0YXRlIGFuZCB1cGRhdGVzIHJlcG9ydCBmb3JtXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBuZXdTdGF0ZVxuICAgICAqL1xuICAgIHNldFN0YXRlKG5ld1N0YXRlKSB7XG4gICAgICAgIGNvbnN0IHByZXZTdGF0ZSA9IHRoaXMuc3RhdGVcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc3RhdGUsIG5ld1N0YXRlKVxuICAgICAgICB0aGlzLnVwZGF0ZShwcmV2U3RhdGUpXG4gICAgfVxuXG4gICAgb25Ub2dnbGUoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbWluaW1pemVkOiAhdGhpcy5zdGF0ZS5taW5pbWl6ZWQsXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgb25DaGFuZ2VBdXRob3IoZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG5hbWU6IGUuY3VycmVudFRhcmdldC52YWx1ZSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBvbkNoYW5nZU1lc3NhZ2UoZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGUuY3VycmVudFRhcmdldC52YWx1ZSxcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHNlbmQgYnV0dG9uIGNsaWNrXG4gICAgICovXG4gICAgb25TZW5kKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgY29uc3QgeyBuYW1lLCBtZXNzYWdlLCB1cmwgfSA9IHRoaXMuc3RhdGVcblxuICAgICAgICBpZiAoIXVybCkgcmV0dXJuXG5cbiAgICAgICAgLy8gc2hvdyBsb2FkZXJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzU2VuZGluZzogdHJ1ZSB9KVxuXG4gICAgICAgIC8vIHNlbmRpbmcgbWVzc2FnZSB0byB0aGUgc2VydmVyXG4gICAgICAgIHNlbmQodXJsLCB7IG5hbWUsIG1lc3NhZ2UgfSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25TZW5kU3VjY2VzcygpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaCh0aGlzLm9uU2VuZEVycm9yKVxuICAgIH1cblxuICAgIG9uU2VuZFN1Y2Nlc3MoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICBtZXNzYWdlOiAnJyxcbiAgICAgICAgICAgIGlzU2VuZGluZzogZmFsc2UsXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgb25TZW5kRXJyb3IoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgIGlzU2VuZGluZzogZmFsc2UsXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBmb3JtIGFjY29yZGluZyB0byBzdGF0ZSBjaGFuZ2VcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IHByZXZpb3VzIHN0YXRlIG9iamVjdFxuICAgICAqL1xuICAgIHVwZGF0ZShwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubWluaW1pemVkKSB7XG4gICAgICAgICAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5ycC1jb250YWluZXInKS5jbGFzc0xpc3QuYWRkKCdycC1jb250YWluZXJfbWluaW1pemVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnJwLWNvbnRhaW5lcicpLmNsYXNzTGlzdC5yZW1vdmUoJ3JwLWNvbnRhaW5lcl9taW5pbWl6ZWQnKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnJwLWNvbnRhaW5lcl9fY292ZXJfbG9hZGluZycpLnN0eWxlLmRpc3BsYXkgPSB0aGlzLnN0YXRlLmlzU2VuZGluZyA/ICdibG9jaycgOiAnbm9uZSdcbiAgICAgICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcucnAtY29udGFpbmVyX19jb3Zlcl9lcnJvcicpLnN0eWxlLmRpc3BsYXkgPSB0aGlzLnN0YXRlLmlzRXJyb3IgPyAnYmxvY2snIDogJ25vbmUnXG5cbiAgICAgICAgaWYgKHByZXZTdGF0ZS5uYW1lICE9PSB0aGlzLnN0YXRlLm5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnJwLWNvbnRhaW5lcl9fYXV0aG9yIC5ycC1jb250YWluZXJfX2ZpZWxkJykudmFsdWUgPSB0aGlzLnN0YXRlLm5hbWVcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldlN0YXRlLm1lc3NhZ2UgIT09IHRoaXMuc3RhdGUubWVzc2FnZSkge1xuICAgICAgICAgICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcucnAtY29udGFpbmVyX19tZXNzYWdlIC5ycC1jb250YWluZXJfX2ZpZWxkJykudmFsdWUgPSB0aGlzLnN0YXRlLm1lc3NhZ2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSAnJ1xuICAgICAgICB0aGlzLmVsLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIHRoaXMuc3RhdGUudGVtcGxhdGUpXG5cbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5ycC1jb250YWluZXInKVxuICAgICAgICBpZiAoZWwgJiYgdGhpcy5zdGF0ZS5taW5pbWl6ZWQpIGVsLmNsYXNzTGlzdC5hZGQoJ21pbmltaXplZCcpXG4gICAgfVxufVxuXG5jb25zdCByZXBvcnRVdGlsaXR5ID0gbmV3IFJlcG9ydFV0aWxpdHkoKVxuXG5jb25zdCBpbml0ID0gcmVwb3J0VXRpbGl0eS5pbml0LmJpbmQocmVwb3J0VXRpbGl0eSlcbmNvbnN0IGNvbmZpZyA9IHJlcG9ydFV0aWxpdHkuY29uZmlnLmJpbmQocmVwb3J0VXRpbGl0eSlcbmNvbnN0IGRlc3Ryb3kgPSByZXBvcnRVdGlsaXR5LmRlc3Ryb3kuYmluZChyZXBvcnRVdGlsaXR5KVxuXG5leHBvcnQge1xuICAgIGluaXQsIGNvbmZpZywgc2VuZCwgZGVzdHJveSxcbn1cbiIsImltcG9ydCBodG1sIGZyb20gJy4vdGVtcGxhdGVzL2Zvcm0uaHRtbCdcblxuY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgLyoqIGVuZHBvaW50IHRvIHNlbmQgbG9ncyAqL1xuICAgIHVybDogJy9yZXBvcnQnLFxuICAgIC8qKiBzZXQgd2luZG93IGNvbXBhY3QgbW9kZSAgKi9cbiAgICBtaW5pbWl6ZWQ6IHRydWUsXG4gICAgLyoqIHNldCBodG1sIGZvciByZW5kZXIgZnVuY3Rpb24gKi9cbiAgICB0ZW1wbGF0ZTogaHRtbCxcbn1cblxuZXhwb3J0IGRlZmF1bHQgZGVmYXVsdHNcbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPXJwLWNvbnRhaW5lcj4gPGRpdiBjbGFzcz1ycC1jb250YWluZXJfX2hlYWRlciBkYXRhLW5hbWU9aGVhZGVyPiDQndCw0L/QuNGI0LjRgtC1INC90LDQvCDQvtCxINC+0YjQuNCx0LrQtSEgPGRpdiBjbGFzcz1ycC1jb250YWluZXJfX2Rpc21pc3M+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPXJwLWNvbnRhaW5lcl9fd3JhcHBlcj4gPGZvcm0+IDxmaWVsZHNldD4gPGRpdiBjbGFzcz1ycC1jb250YWluZXJfX2F1dGhvcj4gPGxhYmVsPiDQktCw0YjQtSDQmNC80Y8gPGlucHV0IGRhdGEtbmFtZT1hdXRob3IgY2xhc3M9cnAtY29udGFpbmVyX19maWVsZCB0eXBlPXRleHQgLz4gPC9sYWJlbD4gPC9kaXY+IDxkaXYgY2xhc3M9cnAtY29udGFpbmVyX19tZXNzYWdlPiA8bGFiZWw+INCe0YHRgtCw0LLRjNGC0LUg0YHQvtC+0LHRidC10L3QuNC1IDx0ZXh0YXJlYSBkYXRhLW5hbWU9bWVzc2FnZSBjbGFzcz1ycC1jb250YWluZXJfX2ZpZWxkIHR5cGU9dGV4dD48L3RleHRhcmVhPiA8L2xhYmVsPiA8L2Rpdj4gPC9maWVsZHNldD4gPGRpdiBjbGFzcz1ycC1jb250YWluZXJfX2FjdGlvbnM+IDxidXR0b24gY2xhc3M9cnAtY29udGFpbmVyX19idXR0b24gZGF0YS1uYW1lPXNlbmQ+0J7RgtC/0YDQsNCy0LjRgtGMPC9idXR0b24+IDwvZGl2PiA8ZGl2IGNsYXNzPVxcXCJycC1jb250YWluZXJfX2NvdmVyIHJwLWNvbnRhaW5lcl9fY292ZXJfbG9hZGluZ1xcXCI+0J7RgtC/0YDQsNCy0LvRj9C10LwsINC20LTQuNGC0LUuLi48L2Rpdj4gPGRpdiBjbGFzcz1cXFwicnAtY29udGFpbmVyX19jb3ZlciBycC1jb250YWluZXJfX2NvdmVyX2Vycm9yXFxcIj4gPGRpdiBjbGFzcz1ycC1jb250YWluZXJfX2ZpZWxkPtCj0L/RgSwg0YfRgtC+LdGC0L4g0L/QvtGI0LvQviDQvdC1INGC0LDQui4uLjwvZGl2PiA8aW5wdXQgdHlwZT1zdWJtaXQgY2xhc3M9cnAtY29udGFpbmVyX19idXR0b24gZGF0YS1uYW1lPXNlbmQgdmFsdWU9XFxcItCe0YLQv9GA0LDQstC40YLRjCDQtdGJ0LUg0YDQsNC3XFxcIj4gPC9kaXY+IDwvZm9ybT4gPC9kaXY+IDwvZGl2PlwiOyIsIi8qKlxuICogc2VuZHMgUE9TVCB0byB1cmwgd2l0aCB7IG1lc3NhZ2UsIG5hbWUgfSBpbiBKU09OLlxuICogQHBhcmFtIHt1cmx9IHVybFxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBBIFByb21pc2Ugb2JqZWN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNlbmQodXJsLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IG1lc3NhZ2UsIG5hbWUgfSA9IG9wdGlvbnNcblxuICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICB9KSxcbiAgICB9KVxufVxuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTUtMSEuL3N0eWxlcy5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTUtMSEuL3N0eWxlcy5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS01LTEhLi9zdHlsZXMuY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIucnAtY29udGFpbmVyICoge1xcclxcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcclxcbn1cXHJcXG5cXHJcXG4ucnAtY29udGFpbmVyIGZpZWxkc2V0IHtcXHJcXG4gICAgYm9yZGVyOiBub25lO1xcclxcbiAgICBtYXJnaW46IDA7XFxyXFxuICAgIHBhZGRpbmc6IDA7XFxyXFxufVxcclxcbi5ycC1jb250YWluZXIge1xcclxcbiAgICBib3R0b206IDA7XFxyXFxuICAgIGJveC1zaGFkb3c6IDAgMnB4IDJweCAwIHJnYmEoMCwgMCwgMCwgLjE0KSwgMCAzcHggMXB4IC0ycHggcmdiYSgwLCAwLCAwLCAuMiksIDAgMXB4IDVweCAwIHJnYmEoMCwgMCwgMCwgLjEyKTtcXHJcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcclxcbiAgICBmb250LWZhbWlseTogVmVyZGFuYSwgR2VuZXZhLCBUYWhvbWEsIHNhbnMtc2VyaWY7XFxyXFxuICAgIG1hcmdpbjogMDtcXHJcXG4gICAgd2lkdGg6IDI4MHB4O1xcclxcbiAgICBwYWRkaW5nOiAwO1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICAgIHJpZ2h0OiAyMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ucnAtY29udGFpbmVyX21pbmltaXplZCAucnAtY29udGFpbmVyX193cmFwcGVyIHtcXHJcXG4gICAgbWF4LWhlaWdodDogMDtcXHJcXG4gICAgb3BhY2l0eTogMTtcXHJcXG59XFxyXFxuLnJwLWNvbnRhaW5lcl9taW5pbWl6ZWQgLnJwLWNvbnRhaW5lcl9fZGlzbWlzcyB7XFxyXFxuICAgIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5ycC1jb250YWluZXJfX3dyYXBwZXIge1xcclxcbiAgICBtYXgtaGVpZ2h0OiA1MDBweDtcXHJcXG4gICAgb3BhY2l0eTogMTtcXHJcXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0cmFuc2l0aW9uOiBhbGwgLjJzIGVhc2UtaW4tb3V0O1xcclxcbn1cXHJcXG5cXHJcXG4ucnAtY29udGFpbmVyX19jb3ZlciB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigyNDUsIDI0OSwgMjUxKTtcXHJcXG4gICAgY29sb3I6IHJnYigxMzYsIDE0NSwgMTM3KTtcXHJcXG4gICAgZGlzcGxheTogbm9uZTtcXHJcXG4gICAgaGVpZ2h0OiAxMDAlO1xcclxcbiAgICBsZWZ0OiAwO1xcclxcbiAgICBwYWRkaW5nOiAyMHB4O1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG4gICAgdG9wOiAwO1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG59XFxyXFxuXFxyXFxuLnJwLWNvbnRhaW5lcl9faGVhZGVyIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDAsIDE0NiwgMjM1KTtcXHJcXG4gICAgY29sb3I6ICNmZmY7XFxyXFxuICAgIHBhZGRpbmc6IDE1cHggMjBweDtcXHJcXG59XFxyXFxuXFxyXFxuLnJwLWNvbnRhaW5lcl9fZGlzbWlzcyB7XFxyXFxuICAgIGNvbG9yOiAjZmZmO1xcclxcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxuICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcXHJcXG4gICAgZm9udC1zaXplOiAxNHB4O1xcclxcbiAgICBmb250LXdlaWdodDogbGlnaHRlcjtcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgICByaWdodDogOHB4O1xcclxcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxyXFxuICAgIHRvcDogOHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ucnAtY29udGFpbmVyX19kaXNtaXNzOmFmdGVyIHtcXHJcXG4gICAgLyogVVRGLTggc3ltYm9sICovXFxyXFxuICAgIGNvbnRlbnQ6ICdcXFxcMjcxNic7XFxyXFxufVxcclxcblxcclxcbi5ycC1jb250YWluZXJfX2NvdmVyIC5ycC1jb250YWluZXJfX2ZpZWxkIHtcXHJcXG4gICAgcGFkZGluZzogMjBweCAwO1xcclxcbn1cXHJcXG5cXHJcXG4ucnAtY29udGFpbmVyX19maWVsZCB7XFxyXFxuICAgIGJvcmRlcjogbm9uZTtcXHJcXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xcclxcbiAgICBmb250LWZhbWlseTogVmVyZGFuYSwgR2VuZXZhLCBUYWhvbWEsIHNhbnMtc2VyaWY7XFxyXFxuICAgIG1hcmdpbjogMDtcXHJcXG4gICAgcGFkZGluZzogMHB4O1xcclxcbiAgICBwYWRkaW5nLXRvcDogMTBweDtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxufVxcclxcblxcclxcbi5ycC1jb250YWluZXJfX2J1dHRvbjpmb2N1cyxcXHJcXG4ucnAtY29udGFpbmVyX19maWVsZDpmb2N1cyB7XFxyXFxuICAgIG91dGxpbmU6IDA7XFxyXFxufVxcclxcblxcclxcbi5ycC1jb250YWluZXJfX2J1dHRvbiB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMTQ2LCAyMzUsIDEpO1xcclxcbiAgICBib3JkZXI6IG5vbmU7XFxyXFxuICAgIGNvbG9yOiAjZmZmO1xcclxcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxuICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XFxyXFxuICAgIHBhZGRpbmc6IDEycHggMzVweCAxMHB4O1xcclxcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG59XFxyXFxuXFxyXFxuLnJwLWNvbnRhaW5lcl9fbWVzc2FnZSB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQ1LCAyNDksIDI1MSwgMSk7XFxyXFxufVxcclxcblxcclxcbi5ycC1jb250YWluZXJfX21lc3NhZ2UgLnJwLWNvbnRhaW5lcl9fZmllbGQge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcXHJcXG4gICAgbWluLWhlaWdodDogODBweDtcXHJcXG4gICAgcmVzaXplOiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4ucnAtY29udGFpbmVyIGxhYmVsICxcXHJcXG4ucnAtY29udGFpbmVyIGxhYmVsIHtcXHJcXG4gICAgY29sb3I6IHJnYigxMzYsIDE0NSwgMTM3KTtcXHJcXG4gICAgZGlzcGxheTogYmxvY2s7XFxyXFxuICAgIGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBHZW5ldmEsIFRhaG9tYSwgc2Fucy1zZXJpZjtcXHJcXG4gICAgZm9udC1zaXplOiAxMnB4O1xcclxcbiAgICBwYWRkaW5nOiAyMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ucnAtY29udGFpbmVyX19hY3Rpb25zIHtcXHJcXG4gICAgcGFkZGluZzogMjBweDtcXHJcXG59XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgbGlzdCA9IFtdO1xuXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cdFx0XHRpZihpdGVtWzJdKSB7XG5cdFx0XHRcdHJldHVybiBcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGNvbnRlbnQgKyBcIn1cIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBjb250ZW50O1xuXHRcdFx0fVxuXHRcdH0pLmpvaW4oXCJcIik7XG5cdH07XG5cblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3Rcblx0bGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xuXHRcdHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XG5cdFx0XHRpZih0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcblx0XHR9XG5cdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuXHRcdFx0Ly8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXHRcdFx0aWYodHlwZW9mIGl0ZW1bMF0gIT09IFwibnVtYmVyXCIgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWFRdWVyeSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRsaXN0LnB1c2goaXRlbSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRyZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG5cdHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJztcblx0dmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXHRpZiAoIWNzc01hcHBpbmcpIHtcblx0XHRyZXR1cm4gY29udGVudDtcblx0fVxuXG5cdGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcblx0XHR2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcblx0XHR2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuXHRcdFx0cmV0dXJuICcvKiMgc291cmNlVVJMPScgKyBjc3NNYXBwaW5nLnNvdXJjZVJvb3QgKyBzb3VyY2UgKyAnICovJ1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG5cdH1cblxuXHRyZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufVxuXG4vLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuXHR2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcblx0dmFyIGRhdGEgPSAnc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsJyArIGJhc2U2NDtcblxuXHRyZXR1cm4gJy8qIyAnICsgZGF0YSArICcgKi8nO1xufVxuIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhclx0bWVtb2l6ZSA9IGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIG1lbW87XG5cdH07XG59O1xuXG52YXIgaXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHQvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG5cdC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcblx0Ly8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG5cdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRyZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7XG59KTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQsIHBhcmVudCkge1xuICBpZiAocGFyZW50KXtcbiAgICByZXR1cm4gcGFyZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbiAgfVxuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCwgcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGFzc2luZyBmdW5jdGlvbiBpbiBvcHRpb25zLCB0aGVuIHVzZSBpdCBmb3IgcmVzb2x2ZSBcImhlYWRcIiBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIFVzZWZ1bCBmb3IgU2hhZG93IFJvb3Qgc3R5bGUgaS5lXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vICAgaW5zZXJ0SW50bzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb29cIikuc2hhZG93Um9vdCB9XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHR2YXIgc3R5bGVUYXJnZXQgPSBnZXRUYXJnZXQuY2FsbCh0aGlzLCB0YXJnZXQsIHBhcmVudCk7XG5cdFx0XHQvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXHRcdFx0aWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG5cdFx0XHRcdFx0Ly8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuXHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuXHRcdH1cblx0XHRyZXR1cm4gbWVtb1t0YXJnZXRdXG5cdH07XG59KSgpO1xuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhclx0c2luZ2xldG9uQ291bnRlciA9IDA7XG52YXJcdHN0eWxlc0luc2VydGVkQXRUb3AgPSBbXTtcblxudmFyXHRmaXhVcmxzID0gcmVxdWlyZShcIi4vdXJsc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zLmF0dHJzIDoge307XG5cblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09IFwiYm9vbGVhblwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSA8aGVhZD4gZWxlbWVudFxuICAgICAgICBpZiAoIW9wdGlvbnMuaW5zZXJ0SW50bykgb3B0aW9ucy5pbnNlcnRJbnRvID0gXCJoZWFkXCI7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIHRoZSB0YXJnZXRcblx0aWYgKCFvcHRpb25zLmluc2VydEF0KSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuXG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSAobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufTtcblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20gKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzIChsaXN0LCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKSBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2UgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50IChvcHRpb25zLCBzdHlsZSkge1xuXHR2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pXG5cblx0aWYgKCF0YXJnZXQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcblx0fVxuXG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlc0luc2VydGVkQXRUb3Bbc3R5bGVzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblxuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIHRhcmdldC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYgKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0fVxuXHRcdHN0eWxlc0luc2VydGVkQXRUb3AucHVzaChzdHlsZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpIHtcblx0XHR2YXIgbmV4dFNpYmxpbmcgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlLCB0YXJnZXQpO1xuXHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIG5leHRTaWJsaW5nKTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJbU3R5bGUgTG9hZGVyXVxcblxcbiBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0JyAoJ29wdGlvbnMuaW5zZXJ0QXQnKSBmb3VuZC5cXG4gTXVzdCBiZSAndG9wJywgJ2JvdHRvbScsIG9yIE9iamVjdC5cXG4gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyI2luc2VydGF0KVxcblwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQgKHN0eWxlKSB7XG5cdGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuXG5cdHZhciBpZHggPSBzdHlsZXNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGUpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlc0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXG5cdGlmKG9wdGlvbnMuYXR0cnMubm9uY2UgPT09IHVuZGVmaW5lZCkge1xuXHRcdHZhciBub25jZSA9IGdldE5vbmNlKCk7XG5cdFx0aWYgKG5vbmNlKSB7XG5cdFx0XHRvcHRpb25zLmF0dHJzLm5vbmNlID0gbm9uY2U7XG5cdFx0fVxuXHR9XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gZ2V0Tm9uY2UoKSB7XG5cdGlmICh0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRyZXR1cm4gX193ZWJwYWNrX25vbmNlX187XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xuXG5cdC8vIElmIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHdhcyBkZWZpbmVkLCBydW4gaXQgb24gdGhlIGNzc1xuXHRpZiAob3B0aW9ucy50cmFuc2Zvcm0gJiYgb2JqLmNzcykge1xuXHQgICAgcmVzdWx0ID0gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcyk7XG5cblx0ICAgIGlmIChyZXN1bHQpIHtcblx0ICAgIFx0Ly8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuXG5cdCAgICBcdG9iai5jc3MgPSByZXN1bHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvLyBJZiB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZG9uJ3QgYWRkIHRoaXMgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBjb25kaXRpb25hbCBsb2FkaW5nIG9mIGNzc1xuXHQgICAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0Ly8gbm9vcFxuXHQgICAgXHR9O1xuXHQgICAgfVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cblx0XHRzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cblx0fSBlbHNlIGlmIChcblx0XHRvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0XHRzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblxuXHRcdFx0aWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHN0eWxlID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmopIHtcblx0XHRpZiAobmV3T2JqKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0XHRcdFx0bmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiZcblx0XHRcdFx0bmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZS5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0fVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rIChsaW5rLCBvcHRpb25zLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG5cdC8qXG5cdFx0SWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkXG5cdFx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0XHRvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb25cblx0XHRkaXJlY3RseVxuXHQqL1xuXHR2YXIgYXV0b0ZpeFVybHMgPSBvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyA9PT0gdW5kZWZpbmVkICYmIHNvdXJjZU1hcDtcblxuXHRpZiAob3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgfHwgYXV0b0ZpeFVybHMpIHtcblx0XHRjc3MgPSBmaXhVcmxzKGNzcyk7XG5cdH1cblxuXHRpZiAoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGluay5ocmVmO1xuXG5cdGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cblx0aWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG4iLCJcbi8qKlxuICogV2hlbiBzb3VyY2UgbWFwcyBhcmUgZW5hYmxlZCwgYHN0eWxlLWxvYWRlcmAgdXNlcyBhIGxpbmsgZWxlbWVudCB3aXRoIGEgZGF0YS11cmkgdG9cbiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGFcbiAqIGJ1bmRsZSBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKlxuICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuXG4gKlxuICogSW5zdGVhZCwgdGhpcyBmdW5jdGlvbiBcImZpeGVzXCIgdGhlIHJlbGF0aXZlIHVybHMgdG8gYmUgYWJzb2x1dGUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHBhZ2UgbG9jYXRpb24uXG4gKlxuICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAvLyBnZXQgY3VycmVudCBsb2NhdGlvblxuICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbjtcblxuICBpZiAoIWxvY2F0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb25cIik7XG4gIH1cblxuXHQvLyBibGFuayBvciBudWxsP1xuXHRpZiAoIWNzcyB8fCB0eXBlb2YgY3NzICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHZhciBiYXNlVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0O1xuICB2YXIgY3VycmVudERpciA9IGJhc2VVcmwgKyBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiL1wiKTtcblxuXHQvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLilcblx0Lypcblx0VGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMganVzdCBhIHdheSB0byByZWN1cnNpdmVseSBtYXRjaCBicmFja2V0cyB3aXRoaW5cblx0YSBzdHJpbmcuXG5cblx0IC91cmxcXHMqXFwoICA9IE1hdGNoIG9uIHRoZSB3b3JkIFwidXJsXCIgd2l0aCBhbnkgd2hpdGVzcGFjZSBhZnRlciBpdCBhbmQgdGhlbiBhIHBhcmVuc1xuXHQgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgKD86ICA9IFN0YXJ0IGEgbm9uLWNhcHR1cmluZyBncm91cFxuXHQgICAgICAgICBbXikoXSAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKD86ICA9IFN0YXJ0IGFub3RoZXIgbm9uLWNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICAgICAgICAgICBbXikoXSsgID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgICAgIFteKShdKiAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICBcXCkgID0gTWF0Y2ggYSBlbmQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICkgID0gRW5kIEdyb3VwXG4gICAgICAgICAgICAgICpcXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVuc1xuICAgICAgICAgICkgID0gQ2xvc2Ugbm9uLWNhcHR1cmluZyBncm91cFxuICAgICAgICAgICogID0gTWF0Y2ggYW55dGhpbmdcbiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cFxuXHQgXFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zXG5cblx0IC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLlxuXHQgKi9cblx0dmFyIGZpeGVkQ3NzID0gY3NzLnJlcGxhY2UoL3VybFxccypcXCgoKD86W14pKF18XFwoKD86W14pKF0rfFxcKFteKShdKlxcKSkqXFwpKSopXFwpL2dpLCBmdW5jdGlvbihmdWxsTWF0Y2gsIG9yaWdVcmwpIHtcblx0XHQvLyBzdHJpcCBxdW90ZXMgKGlmIHRoZXkgZXhpc3QpXG5cdFx0dmFyIHVucXVvdGVkT3JpZ1VybCA9IG9yaWdVcmxcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pXG5cdFx0XHQucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSk7XG5cblx0XHQvLyBhbHJlYWR5IGEgZnVsbCB1cmw/IG5vIGNoYW5nZVxuXHRcdGlmICgvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcL3xcXHMqJCkvaS50ZXN0KHVucXVvdGVkT3JpZ1VybCkpIHtcblx0XHQgIHJldHVybiBmdWxsTWF0Y2g7XG5cdFx0fVxuXG5cdFx0Ly8gY29udmVydCB0aGUgdXJsIHRvIGEgZnVsbCB1cmxcblx0XHR2YXIgbmV3VXJsO1xuXG5cdFx0aWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPT09IDApIHtcblx0XHQgIFx0Ly9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sP1xuXHRcdFx0bmV3VXJsID0gdW5xdW90ZWRPcmlnVXJsO1xuXHRcdH0gZWxzZSBpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYmFzZSB1cmxcblx0XHRcdG5ld1VybCA9IGJhc2VVcmwgKyB1bnF1b3RlZE9yaWdVcmw7IC8vIGFscmVhZHkgc3RhcnRzIHdpdGggJy8nXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5XG5cdFx0XHRuZXdVcmwgPSBjdXJyZW50RGlyICsgdW5xdW90ZWRPcmlnVXJsLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKTsgLy8gU3RyaXAgbGVhZGluZyAnLi8nXG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKVxuXHRcdHJldHVybiBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcblx0fSk7XG5cblx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3Ncblx0cmV0dXJuIGZpeGVkQ3NzO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=